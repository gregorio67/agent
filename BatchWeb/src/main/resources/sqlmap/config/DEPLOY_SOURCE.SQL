DROP TABLE DEPLOY_TARGET;


CREATE TABLE DEPLOY_TARGET
(
     HOST_NAME       		VARCHAR2(50) NOT NULL PRIMARY KEY,
     SOURCE_DIR				VARCHAR2(50) NOT NULL,
     TARGET_WEB_DIR			VARCHAR2(50) NOT NULL,
     TARGET_WAS_DIR			VARCHAR2(50) NOT NULL,
     TARGET_WEB_IP_ADDR1    VARCHAR2(50),     
     TARGET_WEB_IP_ADDR2    VARCHAR2(50),     
     TARGET_WEB_IP_ADDR3    VARCHAR2(50),     
     TARGET_WEB_IP_ADDR4    VARCHAR2(50),     
     TARGET_WAS_IP_ADDR1    VARCHAR2(50),     
     TARGET_WAS_IP_ADDR2    VARCHAR2(50),     
     TARGET_WAS_IP_ADDR3    VARCHAR2(50),     
     TARGET_WAS_IP_ADDR4    VARCHAR2(50),     
     USE_YN          		VARCHAR2(1),
     REG_DATE        		TIMESTAMP,
     REG_USER        		VARCHAR2(50)
)


CREATE TABLE DEPLOY_SOURCE
(
     DEPLOY_SOURCE_SEQ	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	 BIZ_NAME       	VARCHAR2(50) NOT NULL,
     DEPLOY_DATE		VARCHAR(10),
     DEPLOY_PACKAGE		VARCHAR2(50) NOT NULL,
     DEPLOY_SOURCE		VARCHAR2(50) NOT NULL,
     DEPLOY_DESCRIPT	VARCHAR2(500) NOT NULL,     
     APPROVE_STATUS		VARCHAR2(1),
     USE_YN          	VARCHAR2(1),
     REG_DATE        	TIMESTAMP,
     REG_USER        	VARCHAR2(50)     
)

CREATE  UNIQUE INDEX IF NOT EXISTS DEPLOY_SOURCE_UI ON DEPLOY_SOURCE(BIZ_NAME, DEPLOY_PACKAGE, DEPLOY_SOURCE);

  ALTER TABLE HOST_INFO
  ADD CONSTRAINT PK_HOST_INFO PRIMARY KEY (HOST_NAME); 
  
  
  ALTER TABLE JVM_INFO
  ADD CONSTRAINT PK_JVM_INFO PRIMARY KEY (HOST_NAME, JVM_NAME);  
 COMMIT;

 
insert into DEPLOY_TARGET values('BATCH-WEB', '/BatchWeb/src/main/','/BatchWeb/src/main/', '/BatchWeb/src/main/', '10.1.2.1','','','','10.1.2.1','','','','Y', CURRENT_TIMESTAMP, '');
insert into DEPLOY_TARGET values('BATCH-AGENT', '/BatchWeb/src/main/','/BatchWeb/src/main/', '/BatchWeb/src/main/', '10.1.2.1','','','','10.1.2.1','','','','Y', DATE('now'), '');
